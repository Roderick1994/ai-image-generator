# 豆包API配置指南

## 问题解决

如果您遇到以下错误：
- `404 Not Found` - 模型不存在或无权限访问
- `500 Internal Server Error` - 服务器内部错误

这通常是因为使用了错误的模型标识符格式。

## 正确配置步骤

### 1. 获取API密钥

1. 访问 [火山方舟控制台](https://console.volcengine.com/ark)
2. 登录您的账户
3. 在左侧菜单中找到「API管理」
4. 创建或获取您的API密钥

### 2. 创建推理端点

**重要：豆包API需要使用推理端点ID，而不是模型名称**

1. 在火山方舟控制台中，导航到「推理服务」
2. 点击「创建推理端点」
3. 选择豆包模型（如 Doubao-pro-4k、Doubao-lite-4k 等）
4. 配置端点参数
5. 创建完成后，您会获得一个以 `ep-` 开头的端点ID

### 3. 配置应用

1. 在应用的豆包配置中：
   - **API密钥**：输入您从控制台获取的API密钥
   - **端点ID**：输入以 `ep-` 开头的端点ID（例如：`ep-20241220161728-xxxxx`）

2. **不要使用模型名称**：
   - ❌ 错误：`doubao-seedream-4.0`
   - ❌ 错误：`doubao-pro-4k`
   - ✅ 正确：`ep-20241220161728-xxxxx`

### 4. 测试配置

1. 保存配置后，应用会自动验证API连接
2. 如果配置正确，您应该看到「连接成功」的提示
3. 现在可以开始生成图像了

## 常见问题

### Q: 为什么不能直接使用模型名称？
A: 豆包API采用推理端点的方式提供服务，每个端点都有唯一的ID。这样可以更好地管理资源和权限。

### Q: 如何找到我的端点ID？
A: 在火山方舟控制台的「推理服务」页面，您可以看到所有创建的端点及其ID。

### Q: 端点ID的格式是什么？
A: 端点ID总是以 `ep-` 开头，后跟时间戳和随机字符，例如：`ep-20241220161728-xxxxx`

### Q: 仍然遇到404错误怎么办？
A: 请检查：
1. 端点ID是否正确（以 `ep-` 开头）
2. API密钥是否有该端点的访问权限
3. 端点是否处于运行状态

## 技术细节

豆包API使用以下端点进行图像生成：
```
POST https://ark.cn-beijing.volces.com/api/v3/images/generations
```

请求格式：
```json
{
  "model": "ep-20241220161728-xxxxx",
  "prompt": "您的图像描述",
  "size": "1024x1024",
  "response_format": "url",
  "n": 1
}
```

## 支持

如果您仍然遇到问题，请：
1. 检查火山方舟控制台中的端点状态
2. 确认API密钥权限
3. 查看应用的错误日志获取更多信息