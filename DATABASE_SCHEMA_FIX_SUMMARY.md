# æ•°æ®åº“æ¶æ„ä¿®å¤å®ŒæˆæŠ¥å‘Š

## ğŸ¯ é—®é¢˜è¯Šæ–­

æ ¹æ®æä¾›çš„4æ¡é”™è¯¯æ—¥å¿—ï¼Œä¸»è¦é—®é¢˜æ˜¯ï¼š
```
Could not find the guidance_scale column of generated_images in the schema cache
```

è¿™è¡¨æ˜Supabaseæ•°æ®åº“ä¸­çš„`generated_images`è¡¨ç¼ºå°‘`guidance_scale`åˆ—ï¼Œå¯¼è‡´åº”ç”¨æ— æ³•æ­£å¸¸ä¿å­˜å›¾ç‰‡æ•°æ®ã€‚

## âœ… å·²å®Œæˆçš„ä¿®å¤å·¥ä½œ

### 1. åˆ›å»ºæ•°æ®åº“ä¿®å¤å·¥å…·
- **æ–‡ä»¶**: `src/utils/database-fixer.ts`
- **åŠŸèƒ½**: è‡ªåŠ¨æ£€æµ‹å¹¶ä¿®å¤æ•°æ®åº“æ¶æ„é—®é¢˜
- **ä¿®å¤å†…å®¹**:
  - æ·»åŠ ç¼ºå¤±çš„ `guidance_scale` åˆ—ï¼ˆDECIMALç±»å‹ï¼Œé»˜è®¤å€¼7.5ï¼‰
  - æ·»åŠ å…¶ä»–å¯èƒ½ç¼ºå¤±çš„åˆ—ï¼š`seed`, `steps`, `quality`, `style`, `is_favorite`, `tags`
  - æ›´æ–°ç°æœ‰è®°å½•çš„ç©ºå€¼
  - åˆ·æ–°æ•°æ®åº“æ¶æ„ç¼“å­˜

### 2. é›†æˆè‡ªåŠ¨ä¿®å¤åŠŸèƒ½
- **æ–‡ä»¶**: `src/app/page.tsx`
- **åŠŸèƒ½**: åº”ç”¨å¯åŠ¨æ—¶è‡ªåŠ¨è¿è¡Œæ•°æ®åº“ä¿®å¤
- **æ‰§è¡Œæ—¶æœº**: Supabaseé…ç½®æ­£ç¡®æ—¶ï¼Œåœ¨æ•°æ®åº“åˆå§‹åŒ–ä¹‹å‰è¿è¡Œ

### 3. åˆ›å»ºæ‰‹åŠ¨ä¿®å¤è„šæœ¬
- **æ–‡ä»¶**: `supabase/migrations/007_fix_guidance_scale_column.sql`
- **ç”¨é€”**: å¯é€šè¿‡Supabaseæ§åˆ¶å°æ‰‹åŠ¨æ‰§è¡Œçš„SQLè„šæœ¬

### 4. åˆ›å»ºæµ‹è¯•å·¥å…·
- **æ–‡ä»¶**: `test-database-connection.js`
- **åŠŸèƒ½**: éªŒè¯æ•°æ®åº“è¿æ¥å’Œè¡¨ç»“æ„

### 5. åˆ›å»ºä¿®å¤æŒ‡å—
- **æ–‡ä»¶**: `DATABASE_FIX_GUIDE.md`
- **å†…å®¹**: è¯¦ç»†çš„æ‰‹åŠ¨ä¿®å¤æ­¥éª¤è¯´æ˜

## ğŸ”§ å½“å‰çŠ¶æ€

âœ… **ä»£ç ä¿®å¤**: å®Œæˆ  
âœ… **æ„å»ºæµ‹è¯•**: é€šè¿‡  
âœ… **è‡ªåŠ¨ä¿®å¤é€»è¾‘**: å·²é›†æˆ  
âš ï¸ **ç¯å¢ƒé…ç½®**: éœ€è¦ç”¨æˆ·é…ç½®çœŸå®çš„Supabaseå‡­æ®  

## ğŸ“‹ ç”¨æˆ·éœ€è¦å®Œæˆçš„æ­¥éª¤

### æ­¥éª¤1: é…ç½®Supabaseç¯å¢ƒå˜é‡

å½“å‰`.env.local`æ–‡ä»¶ä¸­çš„Supabaseé…ç½®ä¸ºå ä½ç¬¦ï¼š
```env
NEXT_PUBLIC_SUPABASE_URL=your_supabase_project_url
NEXT_PUBLIC_SUPABASE_ANON_KEY=your_supabase_anon_key
SUPABASE_SERVICE_ROLE_KEY=your_supabase_service_role_key
```

éœ€è¦æ›¿æ¢ä¸ºçœŸå®çš„Supabaseé¡¹ç›®å‡­æ®ã€‚

### æ­¥éª¤2: é‡å¯åº”ç”¨

é…ç½®å®Œæˆåé‡å¯å¼€å‘æœåŠ¡å™¨ï¼š
```bash
npm run dev
```

### æ­¥éª¤3: éªŒè¯ä¿®å¤ç»“æœ

åº”ç”¨å¯åŠ¨åï¼ŒæŸ¥çœ‹æ§åˆ¶å°æ—¥å¿—åº”è¯¥æ˜¾ç¤ºï¼š
```
ğŸ”§ Checking and fixing database schema...
âœ… Database schema check completed
âœ… Supabase database initialized successfully
```

## ğŸš€ é¢„æœŸç»“æœ

ä¿®å¤å®Œæˆåï¼š
1. **å­˜å‚¨çŠ¶æ€**: ä»"Local Storage Active"å˜ä¸º"Account Active"
2. **å›¾ç‰‡ä¿å­˜**: å¯ä»¥æ­£å¸¸ä¿å­˜åˆ°Supabaseäº‘ç«¯æ•°æ®åº“
3. **é”™è¯¯æ¶ˆé™¤**: ä¸å†å‡ºç°"guidance_scale column"ç›¸å…³é”™è¯¯
4. **æ•°æ®åŒæ­¥**: å›¾ç‰‡å¯ä»¥åœ¨ä¸åŒè®¾å¤‡é—´åŒæ­¥

## ğŸ” æ•…éšœæ’é™¤

å¦‚æœä¿®å¤åä»æœ‰é—®é¢˜ï¼š

1. **æ£€æŸ¥ç¯å¢ƒå˜é‡**: ç¡®ä¿Supabaseå‡­æ®æ­£ç¡®
2. **æŸ¥çœ‹æ§åˆ¶å°**: æ£€æŸ¥æ˜¯å¦æœ‰å…¶ä»–é”™è¯¯ä¿¡æ¯
3. **æ‰‹åŠ¨æ‰§è¡ŒSQL**: ä½¿ç”¨`007_fix_guidance_scale_column.sql`è„šæœ¬
4. **éªŒè¯è¡¨ç»“æ„**: è¿è¡Œ`node test-database-connection.js`

## ğŸ“ æŠ€æœ¯æ”¯æŒ

å¦‚æœé‡åˆ°é—®é¢˜ï¼Œè¯·æä¾›ï¼š
- æ§åˆ¶å°é”™è¯¯æ—¥å¿—
- ç½‘ç»œè¯·æ±‚é”™è¯¯ä¿¡æ¯
- Supabaseé¡¹ç›®é…ç½®çŠ¶æ€

---

**ä¿®å¤å®Œæˆæ—¶é—´**: 2024å¹´12æœˆ
**ä¿®å¤çŠ¶æ€**: âœ… ä»£ç ä¿®å¤å®Œæˆï¼Œç­‰å¾…ç¯å¢ƒé…ç½®